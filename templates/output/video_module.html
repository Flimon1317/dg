{% extends "base_analytics.html" %}

{% block title %} Digital Green  - Production Statistics{% endblock %}

{% block cssfile %}  
    {{block.super}}   
    <link type='text/css' rel='stylesheet' href='/media/Output/CSS/production.css' />
{% endblock cssfile %}

{% block jsfile %}  
    {{block.super}}
    <script type="text/javascript" src="/media/Output/ampie/swfobject.js"></script>
	<script type="text/javascript" src="/media/Output/amcolumn/swfobject.js"></script>
	<script type="text/javascript" src="/media/Output/amxy/swfobject.js"></script>
    <script type="text/javascript" src="/media/Output/JS/Jexpandview.js"></script>          
{% endblock jsfile %}	

{% block analyticsbreadcrums %} 	
	{{block.super}}
	/ <span style='font-size:0.9em; font-weight:bold;'> Production Statistics </span>	
{% endblock analyticsbreadcrums %}

	{% block contentbody %}
		{{block.super}}		
<div id='contentstat'>	
	<div id='table1'>
		<div id='divstattitle'>
			<table id='divtitletable'  cellspacing='0' cellpadding='0'>						
			<tr>
				<td class='divtitletablename'> <div id='divstattitlename'>Key Statistics</div> </td>
				<td class='divtitletableimg'>  </td>
			</tr>
			</table>								
		</div>
		<table id='table1stat' cellspacing='0' cellpadding='0'> 				
		<tr>
			<td class='table1statdesc'>
			<div class='statdesc'>
				<div class='statdescname'>	Total number of videos produced	</div>
				<div id='statdescimg'> 	
					<div id='statdescimg1'>	
						The total number of videos that have been <br/>
						produced across in a chosen geography						
					</div>								
				</div>
			</div>
			<div class='statnumber'>
				<div class='statdesnumber'>	{{tot_video}} videos	</div>
			</div>																				
			</td>	
			<td class='table1statdesc'>
				<div class='statdesc'>
					<div class='statdescname'>	Total number of distinct videos screened	</div>
					<div id='statdescimg'> 
						<div id='statdescimg1'>	
						The total number of videos that have <br/>
						been screened to the farmer groups						
						</div>								
					</div>
				</div>
				<div class='statnumber'>
					<div class='statdesnumber'>	{{tot_vids_screened}} videos	</div>
				</div>													
			</td>
			<td class='table1statdesc'>
							<div class='statdesc'>
								<div class='statdescname'>	Average time taken to produce a video	</div>
								<div id='statdescimg'>
									<div id='statdescimg1'>	
										Average time takento produce a<br/> 
										video in a particular geography	 					
									</div>									 									
								</div>																
							</div>
							<div class='statnumber'>
								<div class='statdesnumber'>	{{tot_average|floatformat:2|default:'0'}} days	</div>
							</div>																			
						</td>
		</tr>
		</table>				
		</div>					
	</div>
	<div id='divstattitle'>
		<table id='divtitletable'  cellspacing='0' cellpadding='0'>						
		<tr>
			<td class='divtitletablename'> <div id='divstattitlename'>Graphs</div> </td>
			<td class='divtitletableimg'>  </td>
		</tr>
		</table>								
	</div>
	<div id='contenttable'>	
		<table cellpadding="0" cellspacing="0" border="0" id="graphtable">
		<tr>
			<td id="graphtabletd">					
			<div id="graphdiv1">
				<div id="graphdiv1title">
					<div id="graphdiv1titledesc" >									
						<div id="subgraphdiv1titledesc1"> Geographic distribution of Videos </div>
							<div id="subgraphdiv1titledesc2"> <a href='javascript:zoomIn(geog_wise_pie1,"Geographic distribution of Videos")'> <img src="/media/Output/Images/zoomicon1.png" title='Zoom In'> </a> </div>	
					</div>
				</div>
				<div class="graphdiv1desc" id="flash_area_geogwise_pie">								
				</div>												
			</div>
			<div id="graphdiv1">
				<div id="graphdiv1title"> 
					<div id="graphdiv1titledesc" >									
						<div id="subgraphdiv1titledesc1"> Videos Produced per Month </div>
						<div id="subgraphdiv1titledesc2"> <a href='javascript:zoomIn(monthbar1,"Videos Produced per Month")'> <img src="/media/Output/Images/zoomicon1.png" title='Zoom In'> </a> </div>	
					</div>															
				</div>
				<div class="graphdiv1desc" id="flash_area_monthwise_bar">								
				</div>						
			</div>					
			</td>
		</tr>
		<tr>
			<td id="graphtabletd">					
			<div id="graphdiv1">
				<div id="graphdiv1title"> 
					<div id="graphdiv1titledesc" >									
						<div id="subgraphdiv1titledesc1"> Videos Produced over Time </div>
						<div id="subgraphdiv1titledesc2"> <a href='javascript:zoomIn(videoprod_line1,"Videos Produced over Time")'> <img src="/media/Output/Images/zoomicon1.png" title='Zoom In'> </a> </div>	
					</div>	
				</div>
				<div class="graphdiv1desc" id = "flash_area_vid_prod_time">						
				</div>						
			</div>
			<div id="graphdiv1" >
				<div id="graphdiv1title"> 
					<div id="graphdiv1titledesc" >									
						<div id="subgraphdiv1titledesc1"> Videos per Practice </div>
							<div id="subgraphdiv1titledesc2"> <a href='javascript:zoomIn(practice1,"Videos per Practice")'> <img src="/media/Output/Images/zoomicon1.png" title='Zoom In'> </a> </div>	
					</div>									
				</div>
				<div  style="width:75px;float:left;">
					<select class='select prac' name='prac_n' id='practice' onChange="chartDraw(getElementById('top_prac').value,document.getElementById('sub_prac').value,getElementById('util').value,getElementById('type').value,getElementById('sub').value,this.value)">
						<option value=0 >Top Practice</option>
						<option value=1 >Sub Practice</option>
						<option value=2 >Utility</option>
						<option value=3 >  Type</option>
						<option value=4 selected='selected'>Subject</option>
					</select>				
				</div>
				<div style="width:70px;float:left;">
					<select class='select top_prac' name='top_prac_n' id='top_prac' onChange="ValChange( this.value,document.getElementById('sub_prac').value,getElementById('util').value,getElementById('type').value,getElementById('sub').value,getElementById('practice').value)">
						<option selected='selected'>Any</option>
					</select>								
				</div>
				<div style="width:75px;float:left;">
					<select class='select sub_prac' name='sub_prac_n' id='sub_prac' onChange="ValChange(document.getElementById('top_prac').value,this.value,getElementById('util').value,getElementById('type').value,getElementById('sub').value,getElementById('practice').value)">
						<option selected='selected'>Any</option>
					</select>				
				</div>
				<div style="width:75px;float:left;">
					<select class='select utility' name='util_n' id='util' onChange="ValChange(document.getElementById('top_prac').value,getElementById('sub_prac').value,this.value,getElementById('type').value,getElementById('sub').value,getElementById('practice').value)">
						<option selected='selected'>Any</option>
					</select>				
				</div>
				<div style="width:75px;float:left;">
					<select class='select type' name='type_n' id='type' onChange="ValChange(document.getElementById('top_prac').value,getElementById('sub_prac').value,getElementById('util').value,this.value,getElementById('sub').value,getElementById('practice').value)">
						<option selected='selected'>Any</option>
					</select>				
				</div>
				<div style="width:75px;float:left;">
					<select class='select subject' name='sub_n' id='sub' onChange="ValChange(document.getElementById('top_prac').value,getElementById('sub_prac').value,getElementById('util').value,getElementById('type').value,this.value,getElementById('practice').value)">
						<option selected='selected'>Any</option>
					</select>				
				</div>
				<div style="width:75px;margin-left:440px;"> <input id='Reset1' type='reset' onclick="init()"  value="Reset"> </div>
				
				<div class="graphdiv1desc" style="min-height:385px;" id = "flash_area_practice_type_scatter" ></div>						
			</div>					
					</td>
				</tr>
				<tr>
					<td id="graphtabletd">					
						<div id="graphdiv1">
							<div id="graphdiv1title">
								<div id="graphdiv1titledesc" >									
									<div id="subgraphdiv1titledesc1"> Videos per Language </div>
									<div id="subgraphdiv1titledesc2"> <a href='javascript:zoomIn(language1,"Videos per Language")'> <img src="/media/Output/Images/zoomicon1.png" title='Zoom In'> </a> </div>	
								</div>								
							</div>
							<div class="graphdiv1desc" id = "flash_area_language_scatter" >
							</div>						
						</div>
						<div id="graphdiv1">
							<div id="graphdiv1title">
								<div id="graphdiv1titledesc" >									
									<div id="subgraphdiv1titledesc1"> Videos per Type </div>
									<div id="subgraphdiv1titledesc2"> <a href='javascript:zoomIn(type_wise_pie1,"Videos per Type")'> <img src="/media/Output/Images/zoomicon1.png" title='Zoom In'> </a> </div>	
								</div>								
							</div>
							<div class="graphdiv1desc" id = "flash_area_video_type_pie" >
							</div>						
						</div>					
					</td>
				</tr>
				<tr>
					<td id="graphtabletd">					
						<div id="graphdiv0">
							<div id="graphdiv0title">
								<div id="graphdiv0titledesc1" >	Videos per Gender </div>
								<div id="graphdiv0titledesc2" > </div>
								<div id="graphdiv0titledesc3" >	Videos per Actor </div>
							</div>	
							<div id="graphdiv0desc">
								<div class="subgraphdiv0desc1" id="flash_area_mf_ratio" > </div>
								<div class="subgraphdiv0desc2" > </div>
								<div class="subgraphdiv0desc3" id="flash_area_actor_ratio"> </div>								
							</div>																													
						</div>					
					</td>
				</tr>
			</table>				
		</div>

<div> 
    <div id="expandview1">        
    </div>       
    <div id="expandview3">    	
    	<div id="expandviewtitle"></div>
    	<div id="expandviewclosebtn" title="Close"></div>    
        <div class="expandviewchart" id="expandview4">        	
        </div>
        <br/>     
    </div>
</div> 

<!-- amline script -->

<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script type="text/javascript">	
/*
	var geog_wise_pie1 = new SWFObject("/media/Output/ampie/ampie.swf", "actor_pie", eochartwidth, eochartheight, "8", "#FFFFFF");
	geog_wise_pie1.addParam("wmode", "transparent");
	geog_wise_pie1.addVariable("path", "/media/Output/ampie/");
	geog_wise_pie1.addVariable("settings_file", encodeURIComponent("/media/Output/ampie/ampie_settings.xml")); 
	geog_wise_pie1.addVariable("data_file", escape('/analytics/video_geog_pie_data?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}'));
	geog_wise_pie1.addVariable("additional_chart_settings", encodeURIComponent("<settings><legend><enabled>true</enabled></legend></settings>"));
	//geog_wise_pie1.write("flash_area_geogwise_pie1");
	
	var monthbar1 = new SWFObject("/media/Output/amcolumn/amcolumn.swf", "amcolumn", eochartwidth, eochartheight, "8", "#FFFFFF");
	monthbar1.addParam("wmode", "transparent");
	monthbar1.addVariable("path", "/media/Output/amcolumn/");
	monthbar1.addVariable("settings_file", encodeURIComponent("/media/Output/amcolumn/amcolumn_settings.xml"));

	var additional_chart_settings = '';
	var additional_chart_settings= $.ajax({ type: "GET", url: "/analytics/video_monthwise_bar_settings/?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}", async: false }).responseText;
	monthbar1.addVariable("additional_chart_settings", encodeURIComponent('<settings>'+additional_chart_settings+'<labels><label lid="0"><text><![CDATA[<font face="Calibri">No. of Videos</font>]]></text></label></labels></settings>'));		
	monthbar1.addVariable("data_file", escape('/analytics/video_monthwise_bar_data?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}'));
	monthbar1.addVariable("preloader_color", "#999999");
	//monthbar1.write("flash_area_monthwise_bar1");
	
	
	var line_data = '';
	var line_settings = '';
	$.ajax({ type: "GET", 
				dataType: 'json',
				async: false,
				url: "/analytics/overview_line_graph/?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}", 
				data:{type:['prod', 'prod_tar']},
				success: function(obj) {
						line_data = obj.data;
						line_settings = obj.settings;
						
				}
	});	 
	
	var videoprod_line1 = new SWFObject("/media/Output/amline/amline.swf", "video_line_chart", eochartwidth, eochartheight, "8", "#FFFFFF");
	videoprod_line1.addParam("wmode", "transparent");
	videoprod_line1.addVariable("path", "/media/Output/amline/");
	videoprod_line1.addVariable("settings_file", encodeURIComponent("/media/Output/amline/amline_settings.xml"));
	videoprod_line1.addVariable("chart_data",escape(line_data));
	videoprod_line1.addVariable("additional_chart_settings", encodeURIComponent(line_settings));
	videoprod_line1.addVariable("chart_id", "video_line_chart");
	//videoprod_line1.write("flash_area_vid_prod_time1");
	
	
	var practice1 = new SWFObject("/media/Output/amxy/amxy.swf", "amxy", eochartwidth, eochartheight, "8", "#FFFFFF");
	practice1.addParam("wmode", "transparent");
	practice1.addVariable("path", "/media/Output/amxy/");
	practice1.addVariable("settings_file", encodeURIComponent("/media/Output/amxy/amxy_settings.xml"));                    // you can set two or more different settings files here (separated by commas)
	practice1.addVariable("data_file", escape('/analytics/video_practice_wise_scatter?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}')); 
	practice1.addVariable("additional_chart_settings", encodeURIComponent('<settings><labels><label lid="0"><text><![CDATA[<font face="Calibri">No. of Videos</font>]]></text></label></labels></settings>'));
	//practice1.write("flash_area_practice_type_scatter1");
	
	var language1 = new SWFObject("/media/Output/amxy/amxy.swf", "amxy", eochartwidth, eochartheight, "8", "#FFFFFF");
	language1.addParam("wmode", "transparent");
	language1.addVariable("path", "/media/Output/amxy/");
	language1.addVariable("settings_file", encodeURIComponent("/media/Output/amxy/amxy_settings.xml"));                    // you can set two or more different settings files here (separated by commas)
	language1.addVariable("data_file", escape('/analytics/video_language_wise_scatter_data?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}'));
	language1.addVariable("additional_chart_settings", encodeURIComponent('<settings><labels><label lid="0"><text><![CDATA[<font face="Calibri">No. of Videos</font>]]></text></label></labels></settings>'));
	//language1.write("flash_area_language_scatter");
	
	var type_wise_pie1 = new SWFObject("/media/Output/ampie/ampie.swf", "actor_pie", eochartwidth, eochartheight, "8", "#FFFFFF");
	type_wise_pie1.addParam("wmode", "transparent");
	type_wise_pie1.addVariable("path", "/media/Output/ampie/");
	type_wise_pie1.addVariable("settings_file", encodeURIComponent("/media/Output/ampie/ampie_settings.xml")); 
	type_wise_pie1.addVariable("data_file", escape('/analytics/video_type_wise_pie?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}'));
	//type_wise_pie1.write("flash_area_video_type_pie");
	
	*/	
	google.load("visualization", "1", {packages:["corechart","controls"]});
	google.setOnLoadCallback(drawChart);
	 
	  function drawChart() {
		  	drawChart1();
		  	drawChart2();
		  	drawChart3();
		  	drawChart4();
		  	drawChart5();
		  	drawChart6();
		  	drawChart7();
		  	drawChart8();
	    	
	   }
	
	   /*
	var monthbar = new SWFObject("/media/Output/amcolumn/amcolumn.swf", "amcolumn", "420", "390", "8", "#FFFFFF");
	monthbar.addParam("wmode", "transparent");
	monthbar.addVariable("path", "/media/Output/amcolumn/");
	monthbar.addVariable("settings_file", encodeURIComponent("/media/Output/amcolumn/amcolumn_settings.xml"));
	
	var additional_chart_settings = '';
	//var additional_chart_settings= $.ajax({ type: "GET", url: "/analytics/video_monthwise_bar_settings?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}", async: false }).responseText;
	monthbar.addVariable("additional_chart_settings", encodeURIComponent('<settings>'+additional_chart_settings+'<labels><label lid="0"><text><![CDATA[<font face="Calibri">No. of Videos</font>]]></text></label></labels></settings>'));
	//monthbar.addVariable("data_file", escape('/analytics/video_monthwise_bar_data?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}'));	
	monthbar.addVariable("preloader_color", "#999999");
	//monthbar.write("flash_area_monthwise_bar");
*/
	function drawChart5() {
		  	  $.getJSON('/analytics/video_monthwise_bar_data/?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}', function(json){
			            var data = google.visualization.arrayToDataTable(json,false);
			
			            var options = {
			                    is3D:true
			                  };

			
			            var chart = new google.visualization.ColumnChart(document.getElementById('flash_area_monthwise_bar'));
			            chart.draw(data, options);
			  });
		    }

	
	/*

	var language = new SWFObject("/media/Output/amxy/amxy.swf", "language_xy", "420", "390", "8", "#FFFFFF");
	language.addParam("wmode", "transparent");
	language.addVariable("path", "/media/Output/amxy/");
	language.addVariable("settings_file", encodeURIComponent("/media/Output/amxy/amxy_settings.xml"));
	language.addVariable("data_file", escape('/analytics/video_language_wise_scatter_data?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}'));
	language.addVariable("additional_chart_settings", encodeURIComponent('<settings><labels><label lid="0"><text><![CDATA[<font face="Calibri">No. of Videos</font>]]></text></label></labels></settings>'));
	//language.write("flash_area_language_scatter");
	*/
	function drawChart6() {
	  	  $.getJSON('/analytics/video_language_wise_scatter_data/?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}', function(json){
		            var data = google.visualization.arrayToDataTable(json,false);
		
		            var options = {
		                    hAxis: {title: 'Practices'},
		                    vAxis: {title: 'Number of Videos'},
		                    bubble: {textStyle: {color: 'none'}},
		                    colorAxis:{legend:null}
		                  };

		
		            var chart = new google.visualization.BubbleChart(document.getElementById('flash_area_language_scatter'));
		            chart.draw(data, options);
		  });
	    }

	
	 
	/*
	var geog_wise_pie = new SWFObject("/media/Output/ampie/ampie.swf", "geog_pie", "440", "390", "8", "#FFFFFF");
	geog_wise_pie.addParam("wmode", "transparent");
	geog_wise_pie.addVariable("path", "/media/Output/ampie/");
	geog_wise_pie.addVariable("settings_file", encodeURIComponent("/media/Output/ampie/ampie_settings.xml")); 
	geog_wise_pie.addVariable("data_file", escape('/analytics/video_geog_pie_data?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}'));
//	geog_wise_pie.write("flash_area_geogwise_pie");
	*/
	   function drawChart1() {
		  	  $.getJSON('/analytics/video_geog_pie_data/?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}', function(json){
			            var data = google.visualization.arrayToDataTable(json,false);
			
			            var options = {
			                    is3D:true
			                  };

			
			            var chart = new google.visualization.PieChart(document.getElementById('flash_area_geogwise_pie'));
			            chart.draw(data, options);
			  });
		    }

	
	/*
	var type_wise_pie = new SWFObject("/media/Output/ampie/ampie.swf", "type_pie", "440", "390", "8", "#FFFFFF");
	type_wise_pie.addParam("wmode", "transparent");
	type_wise_pie.addVariable("path", "/media/Output/ampie/");
	type_wise_pie.addVariable("settings_file", encodeURIComponent("/media/Output/ampie/ampie_settings.xml")); 
	type_wise_pie.addVariable("data_file", escape('/analytics/video_type_wise_pie?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}'));
	//type_wise_pie.write("flash_area_video_type_pie");*/
	 function drawChart2() {
		  	  $.getJSON('/analytics/video_type_wise_pie/?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}', function(json){
			            var data = google.visualization.arrayToDataTable(json,false);
			
			            var options = {
			                    is3D:true
			                  };

			
			            var chart = new google.visualization.PieChart(document.getElementById('flash_area_video_type_pie'));
			            chart.draw(data, options);
			  });
		    }
	/*
	var practice = new SWFObject("/media/Output/amxy/amxy.swf", "practice_xy", "440", "390", "8", "#FFFFFF");
	practice.addParam("wmode", "transparent");
	practice.addVariable("path", "/media/Output/amxy/");
	practice.addVariable("settings_file", encodeURIComponent("/media/Output/amxy/amxy_settings.xml"));
	practice.addVariable("data_file", escape('/analytics/video_practice_wise_scatter?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}'));
	practice.addVariable("additional_chart_settings", encodeURIComponent('<settings><labels><label lid="0"><text><![CDATA[<font face="Calibri">No. of Videos</font>]]></text></label></labels></settings>'));
	practice.write("flash_area_practice_type_scatter");
	*/
	function drawChart7() {
		$.getJSON('/analytics/video_practice_wise_scatter/?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}', function(json){
            data = google.visualization.arrayToDataTable(json,false);
				
			pieChart = new google.visualization.ChartWrapper({
			'chartType': 'BubbleChart',
			'containerId': 'flash_area_practice_type_scatter',
			'options': {
  					'title': 'Number of Videos per practices',
	                'hAxis': {title: 'Practice level'},
	                'vAxis': {title: 'Number of Videos'},
	                'bubble': {textStyle: {color: 'none'}},
	                'legend': {position:'none'}
			},
			'dataTable' : google.visualization.data.group(data,[5],[{'column': 6, 'aggregation': google.visualization.data.min, 'type': 'number'},
			                                                        {'column': 7, 'aggregation': google.visualization.data.sum, 'type': 'number'},
			                                                        {'column': 8, 'aggregation': google.visualization.data.min, 'type': 'string'},
			                                                        {'column': 9, 'aggregation': google.visualization.data.sum, 'type': 'number'}])
			});
				fillSelect(data.getDistinctValues(1),"top_prac","Any");
				fillSelect(data.getDistinctValues(2),"sub_prac","Any");
				fillSelect(data.getDistinctValues(3),"util","Any");
				fillSelect(data.getDistinctValues(4),"type","Any");
				fillSelect(data.getDistinctValues(5),"sub","Any");
            init();
  });	    }
	
	  function chartDraw(top_prac,sub_prac,util,type,sub,number) {
		  var plot_view=new google.visualization.DataView(data);
		  var params=new Array;
		  if (top_prac!="Any")
		  {
			  params.push({column: 1, value: top_prac });
		  }
		  if (sub_prac!="Any")
		  {
			  params.push({column: 2, value: sub_prac });
		  }
		  if (util!="Any")
		  {
			  params.push({column: 3, value: util });
		  }
		  if (type!="Any")
		  {
			  params.push({column: 4, value: type });
		  }
		  if (sub!="Any")
		  {
			  params.push({column: 5, value: sub });
		  }
		  if(params.length>0)
			  {
			  plot_view.setRows(plot_view.getFilteredRows(params));  
			  }
		  
		  var filtered_data=  google.visualization.data.group(plot_view,[parseInt(number)+1],[{'column': 6, 'aggregation': custom_rand, 'type': 'number'},
				                                                                                    {'column': 7, 'aggregation': google.visualization.data.sum, 'type': 'number'},
				                                                                                    {'column': 8, 'aggregation': google.visualization.data.min, 'type': 'string'},
				                                                                                    {'column': 9, 'aggregation': google.visualization.data.sum, 'type': 'number'}]);
		  var null_filtered_data=new google.visualization.DataView(filtered_data);
		  null_filtered_data.hideRows(null_filtered_data.getFilteredRows([{column: 0, value: null}]));
		  pieChart.setDataTable(null_filtered_data);
				  pieChart.draw();
	  }
	  
	  function custom_rand(values) {
		  return values[Math.floor((Math.random()*values.length)+1)];
		}
	  
	  function fillSelect(values,sel_id,sel) {
		  var null_ind=values.indexOf(null);
		  if(null_ind!=-1)
			  {
			  	values.splice(null_ind,1);
			  }
		  
		  var html_values="";
		  i=0;
		  html_values=html_values+"<option selected='selected'>Any</option>"
		  for (item in values){
			  if(values[item]==sel)
				  {
				  	html_values=html_values+"<option selected='selected'>"+values[item]+"</option>"
				  }
			  else
				  {
				  	html_values=html_values+"<option>"+values[item]+"</option>"
				  }
		  i=i+1;
		  }
		  $("#"+sel_id).html(html_values);
	  }
	  
	  function ValChange(top_prac,sub_prac,util,type,sub,number) {
		  //alert(top_prac+";"+sub_prac+";"+util+";"+type+sub)
		  var data_view=new google.visualization.DataView(data);
		  var params=new Array;
		  if (top_prac!="Any")
		  {
			  params.push({column: 1, value: top_prac });
		  }
		  if (sub_prac!="Any")
		  {
			  params.push({column: 2, value: sub_prac });
		  }
		  if (util!="Any")
		  {
			  params.push({column: 3, value: util });
		  }
		  if (type!="Any")
		  {
			  params.push({column: 4, value: type });
		  }
		  if (sub!="Any")
		  {
			  params.push({column: 5, value: sub });
		  }
		  if(params.length>0)
		  {
		  	data_view.setRows(data_view.getFilteredRows(params));
		  }
		  fillSelect(data_view.getDistinctValues(1),"top_prac",top_prac);
		  fillSelect(data_view.getDistinctValues(2),"sub_prac",sub_prac);
		  fillSelect(data_view.getDistinctValues(3),"util",util);
		  fillSelect(data_view.getDistinctValues(4),"type",type);
		  fillSelect(data_view.getDistinctValues(5),"sub",sub);
		  chartDraw(top_prac,sub_prac,util,type,sub,number);
		  
	  }
	  function init()
	  {
		  	fillSelect(data.getDistinctValues(1),"top_prac","Any");
			fillSelect(data.getDistinctValues(2),"sub_prac","Any");
			fillSelect(data.getDistinctValues(3),"util","Any");
			fillSelect(data.getDistinctValues(4),"type","Any");
			fillSelect(data.getDistinctValues(5),"sub","Any");
			html="<option value=0 >Top Practice</option><option value=1 >Sub Practice</option><option value=2 >Utility</option><option value=3 >  Type</option><option value=4 selected='selected'>Subject</option>";
			$("#practice").html(html);
			chartDraw("Any","Any","Any","Any","Any",$("#practice").val());
			
		}

	/*
	
	var videoprod_line = new SWFObject("/media/Output/amline/amline.swf", "video_line_chart", "420", "390", "8", "#FFFFFF");
	videoprod_line.addParam("wmode", "transparent");
	videoprod_line.addVariable("path", "/media/Output/amline/");
	videoprod_line.addVariable("settings_file", encodeURIComponent("/media/Output/amline/amline_settings.xml"));                // you can set two or more different settings files here (separated by commas)
	videoprod_line.addVariable("chart_data",escape(line_data));
	videoprod_line.addVariable("additional_chart_settings", encodeURIComponent(line_settings));
	videoprod_line.addVariable("chart_id", "video_line_chart");
	videoprod_line.write("flash_area_vid_prod_time");
	*/
	function drawChart8() {
		$.ajax({ type: "GET", 
			dataType: 'json',
			async: false,
			url: "/analytics/overview_line_graph/?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}", 
			data:{type:['prod', 'prod_tar']},
			success: function(json){
	            var data = google.visualization.arrayToDataTable(json,false);
	    		
	            var options = {
	                    hAxis: {title: 'Practices'},
	                    vAxis: {title: 'Number of Videos'},
	                  };
	            var chart = new google.visualization.LineChart(document.getElementById('flash_area_vid_prod_time'));
	            chart.draw(data, options);
	  }
});
	}
	
			
	/*		
	var male_female_pie = new SWFObject("/media/Output/ampie/ampie.swf", "mfratio_pie", "420", "300", "8", "#FFFFFF");
	male_female_pie.addParam("wmode", "transparent");
	male_female_pie.addVariable("path", "/media/Output/ampie/");
	male_female_pie.addVariable("settings_file", encodeURIComponent("/media/Output/ampie/ampie_settings.xml"))
	male_female_pie.addVariable("data_file", escape('/analytics/video_pie_graph_mf_ratio?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}'));
//	male_female_pie.write("flash_area_mf_ratio");
	*/
	function drawChart3() {
	  	  $.getJSON('/analytics/video_pie_graph_mf_ratio/?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}', function(json){
		            var data = google.visualization.arrayToDataTable(json,false);
		
		            var options = {
		                    is3D:true
		                  };

		
		            var chart = new google.visualization.PieChart(document.getElementById('flash_area_mf_ratio'));
		            chart.draw(data, options);
		  });
	    }

	/*
	var actor_wise_pie = new SWFObject("/media/Output/ampie/ampie.swf", "actor_pie", "420", "300", "8", "#FFFFFF");
	actor_wise_pie.addParam("wmode", "transparent");
	actor_wise_pie.addVariable("path", "/media/Output/ampie/");
	actor_wise_pie.addVariable("settings_file", encodeURIComponent("/media/Output/ampie/ampie_settings.xml"));
	actor_wise_pie.addVariable("data_file", escape('/analytics/video_actor_wise_pie?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}'));
	//actor_wise_pie.write("flash_area_actor_ratio");*/
	function drawChart4() {
	  	  $.getJSON('/analytics/video_actor_wise_pie/?geog={{search_box_params.cur_geog}}&id={{search_box_params.cur_id}}{{get_req_url|safe}}', function(json){
		            var data = google.visualization.arrayToDataTable(json,false);
		
		            var options = {
		                    is3D:true
		                  };

		
		            var chart = new google.visualization.PieChart(document.getElementById('flash_area_actor_ratio'));
		            chart.draw(data, options);
		  });
	    }
	
	</script>

<!-- end of amline script -->

{% endblock contentbody %}

	